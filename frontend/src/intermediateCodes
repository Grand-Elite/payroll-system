/*
import React, { useEffect, useState } from 'react';
import { fetchEmployees } from '../../services/api';
import { Link } from 'react-router-dom';
import './Employee.css'
function Employee() {
    const [employees, setEmployees] = useState([]); // State to hold employee data
    const [loading, setLoading] = useState(true); // Loading state
  
    // Fetch employees data from API
    useEffect(() => {
      const fetchEmployeeData = async () => {
        try {
          const response = await fetchEmployees();
          setEmployees(response);
        } catch (error) {
          console.error('Error fetching employee data:', error);
        } finally {
          setLoading(false);
        }
      };
  
      fetchEmployeeData();
    }, []);
  
    return (
        <div>
            <header>
                <h2>Employee Details</h2>
            </header>
          <table>
            <thead>
              <tr>
                <th>Employee ID</th>
                <th>Department</th>
                <th>Name</th>
              </tr>
            </thead>
            <tbody>
              {loading ? (
                <tr>
                  <td colSpan="15" style={{ textAlign: 'center' }}>Loading...</td>
                </tr>
              ) : employees.length > 0 ? (
                employees.map((employee) => (
                  <tr key={employee.employeeId}>
                    <td>{employee.employeeId}</td>
                    <td>{employee.department.name}</td>
                    <td>{employee.shortName}</td>
                    <td>
                      <button>Delete</button>
                    </td>
                  </tr>
                ))
              ) : (
                <tr>
                  <td colSpan="15" style={{ textAlign: 'center' }}>No Data</td>
                </tr>
              )}
            </tbody>
          </table>
          <div className="buttons">
            <Link to="/add-new-employee">
                <button>Add New Employee</button>
            </Link>
            <button>Update Employee</button>
            <button>Shift Assign</button>
          </div>
        </div>
    );
}
export default Employee;
*/

/*
import React, { useEffect, useState } from 'react';
import { fetchEmployees, deactivateEmployee } from '../../services/api'; // Import API services
import { Link } from 'react-router-dom';
import './Employee.css';

function Employee() {
  const [employees, setEmployees] = useState([]); // State to hold employee data
  const [loading, setLoading] = useState(true); // Loading state

  // Fetch employees data from API
  useEffect(() => {
    const fetchEmployeeData = async () => {
      try {
        const response = await fetchEmployees();
        setEmployees(response);
      } catch (error) {
        console.error('Error fetching employee data:', error);
      } finally {
        setLoading(false);
      }
    };

    fetchEmployeeData();
  }, []);

  // Deactivate an employee
  const handleDeactivate = async (employeeId) => {
    try {
      await deactivateEmployee(employeeId); // Call API to deactivate employee
      // Update the employees list in the UI
      setEmployees((prevEmployees) =>
        prevEmployees.map((employee) =>
          employee.employeeId === employeeId
            ? { ...employee, status: 'INACTIVE' }
            : employee
        )
      );
    } catch (error) {
      console.error('Error deactivating employee:', error);
    }
  };

  return (
    <div>
      <header>
        <h2>Employee Details</h2>
      </header>
      <table>
        <thead>
          <tr>
            <th>Employee ID</th>
            <th>Department</th>
            <th>Name</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {loading ? (
            <tr>
              <td colSpan="5" style={{ textAlign: 'center' }}>Loading...</td>
            </tr>
          ) : employees.length > 0 ? (
            employees.map((employee) => (
              <tr key={employee.employeeId}>
                <td>{employee.employeeId}</td>
                <td>{employee.department.name}</td>
                <td>{employee.shortName}</td>
                <td>{employee.status}</td>
                <td>
                  {employee.status === 'ACTIVE' ? (
                    <button onClick={() => handleDeactivate(employee.employeeId)}>
                      Deactivate
                    </button>
                  ) : (
                    <span>Inactive</span>
                  )}
                </td>
              </tr>
            ))
          ) : (
            <tr>
              <td colSpan="5" style={{ textAlign: 'center' }}>No Data</td>
            </tr>
          )}
        </tbody>
      </table>
      <div className="buttons">
        <Link to="/add-new-employee">
          <button>Add New Employee</button>
        </Link>
        <button>Update Employee</button>
        <button>Shift Assign</button>
      </div>
    </div>
  );
}

export default Employee;

*/


/*
import React, { useState } from 'react';
import { addEmployee } from '../../../services/api'; // Adjust the import path as necessary

function AddNewEmployee() {
    const [shortName, setShortName] = useState('');
  const [department, setDepartment] = useState(null); // Initialize as null
  const [departments] = useState([
    { departmentId: 1, name: 'Kitchen'}
    
  ]);
  const [error, setError] = useState(null);
  const [success, setSuccess] = useState(null);

  const handleSubmit = async (e) => {
    e.preventDefault();

    const employeeData = {
      shortName,
      department,
      employeeType:"PERMANENT",
      status: "ACTIVE"
    };

    try {
      const responseData = await addEmployee(employeeData);
      console.log('Employee added:', responseData);
      setSuccess('Employee added successfully!');
      setError(null);
    } catch (error) {
      console.error('Error:', error);
      setError(error.message);
      setSuccess(null);
    }

    // Clear the form
    setShortName('');
    setDepartment(null); // Reset department selection
  };

  return (
    <form onSubmit={handleSubmit}>
      <div>
        <label>
          Employee Short Name:
          <input
            type="text"
            value={shortName}
            onChange={(e) => setShortName(e.target.value)}
            required
          />
        </label>
      </div>
      <div>
        <label>
          Department:
          <select
            value={department ? department.departmentId : ''} // Use department ID for select value
            onChange={(e) => {
              const selectedDept = departments.find(dept => dept.departmentId === Number(e.target.value));
              setDepartment(selectedDept || null); // Set the selected department object
            }}
            required
          >
            <option value="">Select a department</option>
            {departments.map((dept) => (
              <option key={dept.departmentId} value={dept.departmentId}>
                {dept.name}
              </option>
            ))}
          </select>
        </label>
      </div>
      <button type="submit">Add</button>
      {error && <p style={{ color: 'red' }}>{error}</p>}
      {success && <p style={{ color: 'green' }}>{success}</p>}
    </form>
  );
};

export default AddNewEmployee;
*/


/*
import React, { useState } from 'react';
import { addEmployee } from '../../../services/api'; // Adjust the import path as necessary

function AddNewEmployee() {
    const [shortName, setShortName] = useState('');
    const [fullName, setFullName] = useState('');
    const [department, setDepartment] = useState(null);
    const [designation, setDesignation] = useState('');
    const [nicNo, setNicNo] = useState('');
    const [employeeType, setEmployeeType] = useState('');
    const [epfNo, setEpfNo] = useState('');

    const departments = [
        { departmentId: 1, name: 'Kitchen' },
        { departmentId: 2, name: 'Steward' },
        { departmentId: 3, name: 'Back Office' },
        { departmentId: 4, name: 'Front Office' },
        { departmentId: 5, name: 'Cleaning & Maintenance' }
    ];

    const [error, setError] = useState(null);
    const [success, setSuccess] = useState(null);

    const handleSubmit = async (e) => {
        e.preventDefault();

        const employeeData = {
            employeeId,
            shortName,
            fullName,
            department,
            designation,
            nicNo,
            employeeType,
            epfNo: employeeType === 'PERMANENT' ? epfNo : '', // Include EPF No if Permanent
            status: "ACTIVE"
        };

        console.log('Employee Data:', employeeData);

        try {
            const responseData = await addEmployee(employeeData);
            console.log('Employee added:', responseData);
            setSuccess('Employee added successfully!');
            setError(null);
        } catch (error) {
            console.error('Error:', error);
            setError(error.message);
            setSuccess(null);
        }

        // Clear the form
        setShortName('');
        setFullName('');
        setDepartment(null);
        setDesignation('');
        setNicNo('');
        setEmployeeType('');
        setEpfNo('');
    };

    return (
        <div className="form-container">
            <form onSubmit={handleSubmit}>
                <div className='add-new-employee'>
                    <label>
                        <span>Employee Short Name:</span>
                        <input
                            type="text"
                            value={shortName}
                            onChange={(e) => setShortName(e.target.value)}
                            required
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Full Name:</span>
                        <input
                            type="text"
                            value={fullName}
                            onChange={(e) => setFullName(e.target.value)}
                            required
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Department:</span>
                        <select
                            value={department ? department.departmentId : ''}
                            onChange={(e) => {
                                const selectedDept = departments.find(dept => dept.departmentId === Number(e.target.value));
                                setDepartment(selectedDept || null);
                            }}
                            required
                        >
                            <option value="">Select a department</option>
                            {departments.map((dept) => (
                                <option key={dept.departmentId} value={dept.departmentId}>
                                    {dept.name}
                                </option>
                            ))}
                        </select>
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Designation:</span>
                        <input
                            type="text"
                            value={designation}
                            onChange={(e) => setDesignation(e.target.value)}
                            required
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>NIC No:</span>
                        <input
                            type="text"
                            value={nicNo}
                            onChange={(e) => setNicNo(e.target.value)}
                            required
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Employee Type:</span>
                        <select
                            value={employeeType}
                            onChange={(e) => {
                                setEmployeeType(e.target.value);
                                if (e.target.value !== 'PERMANENT') {
                                    setEpfNo(''); // Clear EPF No if not Permanent
                                }
                            }}
                            required
                        >
                            <option value="">Select employee type</option>
                            <option value="PERMANENT">Permanent</option>
                            <option value="TEMPORARY">Temporary</option>
                        </select>
                    </label>
                </div>

                
                {employeeType === 'PERMANENT' && (
                    <div className='add-new-employee'>
                        <label>
                            <span>EPF No:</span>
                            <input
                                type="text"
                                value={epfNo}
                                onChange={(e) => setEpfNo(e.target.value)}
                                required
                            />
                        </label>
                    </div>
                )}

                <button type="submit" className="add-button">Add</button>
                {error && <p style={{ color: 'red' }}>{error}</p>}
                {success && <p style={{ color: 'green' }}>{success}</p>}
            </form>
        </div>
    );
};

export default AddNewEmployee;
*/



/*
import React, { useState, useEffect } from 'react';
import { addEmployee, getLastEmployeeId } from '../../../services/api'; // Adjust the import path as necessary

function AddNewEmployee() {
    const [employeeId, setEmployeeId] = useState(''); // New state for Employee ID input
    const [shortName, setShortName] = useState('');
    const [fullName, setFullName] = useState('');
    const [department, setDepartment] = useState(null);
    const [designation, setDesignation] = useState('');
    const [nicNo, setNicNo] = useState('');
    const [employeeType, setEmployeeType] = useState('');
    const [epfNo, setEpfNo] = useState('');
    const [lastEmployeeId, setLastEmployeeId] = useState(null); // State for displaying the last employee ID

    const departments = [
        { departmentId: 1, name: 'Kitchen' },
        { departmentId: 2, name: 'Steward' },
        { departmentId: 3, name: 'Back Office' },
        { departmentId: 4, name: 'Front Office' },
        { departmentId: 5, name: 'Cleaning & Maintenance' }
    ];

    const [error, setError] = useState(null);
    const [success, setSuccess] = useState(null);

    useEffect(() => {
        // Fetch the last employee ID on component mount
        const fetchLastEmployeeId = async () => {
            try {
                const lastId = await getLastEmployeeId();
                setLastEmployeeId(lastId || 0); // If lastId is null or undefined, set it to 0
            } catch (error) {
                console.error('Error fetching last employee ID:', error);
                setLastEmployeeId(0); // Set lastEmployeeId to 0 in case of an error
            }
        };
        fetchLastEmployeeId();
    }, []);

    const handleSubmit = async (e) => {
        e.preventDefault();

        const employeeData = {
            employeeId,
            shortName,
            fullName,
            department,
            designation,
            nicNo,
            employeeType,
            epfNo: employeeType === 'PERMANENT' ? epfNo : '', // Include EPF No if Permanent
            status: "ACTIVE"
        };

        console.log('Employee Data:', employeeData);

        try {
            const responseData = await addEmployee(employeeData);
            console.log('Employee added:', responseData);
            setSuccess('Employee added successfully!');
            setError(null);
        } catch (error) {
            console.error('Error:', error);
            setError(error.message);
            setSuccess(null);
        }

        // Clear the form
        setEmployeeId('');
        setShortName('');
        setFullName('');
        setDepartment(null);
        setDesignation('');
        setNicNo('');
        setEmployeeType('');
        setEpfNo('');
    };

    return (
        <div className="form-container">
            <form onSubmit={handleSubmit}>
                <div className='add-new-employee'>
                    <label>
                        <span>Last Employee ID: {lastEmployeeId !== null ? lastEmployeeId : 'Loading...'}</span>
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Employee ID:</span>
                        <input
                            type="text"
                            value={employeeId}
                            onChange={(e) => setEmployeeId(e.target.value)}
                            required
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Employee Short Name:</span>
                        <input
                            type="text"
                            value={shortName}
                            onChange={(e) => setShortName(e.target.value)}
                            required
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Full Name:</span>
                        <input
                            type="text"
                            value={fullName}
                            onChange={(e) => setFullName(e.target.value)}
                            required
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Department:</span>
                        <select
                            value={department ? department.departmentId : ''}
                            onChange={(e) => {
                                const selectedDept = departments.find(dept => dept.departmentId === Number(e.target.value));
                                setDepartment(selectedDept || null);
                            }}
                            required
                        >
                            <option value="">Select a department</option>
                            {departments.map((dept) => (
                                <option key={dept.departmentId} value={dept.departmentId}>
                                    {dept.name}
                                </option>
                            ))}
                        </select>
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Designation:</span>
                        <input
                            type="text"
                            value={designation}
                            onChange={(e) => setDesignation(e.target.value)}
                            required
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>NIC No:</span>
                        <input
                            type="text"
                            value={nicNo}
                            onChange={(e) => setNicNo(e.target.value)}
                            required
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Employee Type:</span>
                        <select
                            value={employeeType}
                            onChange={(e) => {
                                setEmployeeType(e.target.value);
                                if (e.target.value !== 'PERMANENT') {
                                    setEpfNo(''); // Clear EPF No if not Permanent
                                }
                            }}
                            required
                        >
                            <option value="">Select employee type</option>
                            <option value="PERMANENT">Permanent</option>
                            <option value="TEMPORARY">Temporary</option>
                        </select>
                    </label>
                </div>

                {employeeType === 'PERMANENT' && (
                    <div className='add-new-employee'>
                        <label>
                            <span>EPF No:</span>
                            <input
                                type="text"
                                value={epfNo}
                                onChange={(e) => setEpfNo(e.target.value)}
                                required
                            />
                        </label>
                    </div>
                )}

                <button type="submit" className="add-button">Add</button>
                {error && <p style={{ color: 'red' }}>{error}</p>}
                {success && <p style={{ color: 'green' }}>{success}</p>}
            </form>
        </div>
    );
}

export default AddNewEmployee;
*/

/*
import React, { useState, useEffect } from 'react';
import { addEmployee, getLastEmployeeId } from '../../../services/api'; // Adjust the import path as necessary

function AddNewEmployee() {
    const [employeeId, setEmployeeId] = useState(''); // New state for Employee ID input
    const [shortName, setShortName] = useState('');
    const [fullName, setFullName] = useState('');
    const [department, setDepartment] = useState(null);
    const [designation, setDesignation] = useState('');
    const [nicNo, setNicNo] = useState('');
    const [employeeType, setEmployeeType] = useState('');
    const [epfNo, setEpfNo] = useState('');
    const [lastEmployeeId, setLastEmployeeId] = useState(null); // State for displaying the last employee ID

    const departments = [
        { departmentId: 1, name: 'Kitchen' },
        { departmentId: 2, name: 'Steward' },
        { departmentId: 3, name: 'Back Office' },
        { departmentId: 4, name: 'Front Office' },
        { departmentId: 5, name: 'Cleaning & Maintenance' }
    ];

    const [error, setError] = useState(null);
    const [success, setSuccess] = useState(null);

    useEffect(() => {
        // Fetch the last employee ID on component mount
        const fetchLastEmployeeId = async () => {
            try {
                const lastId = await getLastEmployeeId();
                setLastEmployeeId(lastId || 0); // If lastId is null or undefined, set it to 0
            } catch (error) {
                console.error('Error fetching last employee ID:', error);
                setLastEmployeeId(0); // Set lastEmployeeId to 0 in case of an error
            }
        };
        fetchLastEmployeeId();
    }, []);

    const validateNIC = (nicNumber) => {
        const nicRegex = /^([1-9][0-9]{11}|[1-9][0-9]{9}|[0-9]{9}[vVxX])$/;
        return nicRegex.test(nicNumber);
    };

    const handleSubmit = async (e) => {
        e.preventDefault();

        if (!validateNIC(nicNo)) {
            setError('Invalid NIC number format!');
            return;
        }

        const employeeData = {
            employeeId: employeeId || (lastEmployeeId + 1), // Auto-generate employee ID based on last employee ID
            shortName,
            fullName,
            department,
            designation,
            nicNo,
            employeeType,
            epfNo: employeeType === 'PERMANENT' ? epfNo : '', // Include EPF No if Permanent
            status: "ACTIVE"
        };

        console.log('Employee Data:', employeeData);

        try {
            const responseData = await addEmployee(employeeData);
            console.log('Employee added:', responseData);
            setSuccess('Employee added successfully!');
            setError(null);
        } catch (error) {
            console.error('Error:', error);
            setError(error.message);
            setSuccess(null);
        }

        // Clear the form after submission
        setEmployeeId('');
        setShortName('');
        setFullName('');
        setDepartment(null);
        setDesignation('');
        setNicNo('');
        setEmployeeType('');
        setEpfNo('');
    };

    return (
        <div className="form-container">
            <form onSubmit={handleSubmit}>
                <div className='add-new-employee'>
                    <label>
                        <span>Last Employee ID: {lastEmployeeId !== null ? lastEmployeeId : 'Loading...'}</span>
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Employee ID:</span>
                        <input
                            type="text"
                            value={employeeId}
                            onChange={(e) => setEmployeeId(e.target.value)}
                           
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Employee Short Name:</span>
                        <input
                            type="text"
                            value={shortName}
                            onChange={(e) => setShortName(e.target.value)}
                            required
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Full Name:</span>
                        <input
                            type="text"
                            value={fullName}
                            onChange={(e) => setFullName(e.target.value)}
                            required
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Department:</span>
                        <select
                            value={department ? department.departmentId : ''}
                            onChange={(e) => {
                                const selectedDept = departments.find(dept => dept.departmentId === Number(e.target.value));
                                setDepartment(selectedDept || null);
                            }}
                            required
                        >
                            <option value="">Select a department</option>
                            {departments.map((dept) => (
                                <option key={dept.departmentId} value={dept.departmentId}>
                                    {dept.name}
                                </option>
                            ))}
                        </select>
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Designation:</span>
                        <input
                            type="text"
                            value={designation}
                            onChange={(e) => setDesignation(e.target.value)}
                            required
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>NIC No:</span>
                        <input
                            type="text"
                            value={nicNo}
                            onChange={(e) => setNicNo(e.target.value)}
                            required
                        />
                    </label>
                </div>

                <div className='add-new-employee'>
                    <label>
                        <span>Employee Type:</span>
                        <select
                            value={employeeType}
                            onChange={(e) => {
                                setEmployeeType(e.target.value);
                                if (e.target.value !== 'PERMANENT') {
                                    setEpfNo(''); // Clear EPF No if not Permanent
                                }
                            }}
                            required
                        >
                            <option value="">Select employee type</option>
                            <option value="PERMANENT">Permanent</option>
                            <option value="TEMPORARY">Temporary</option>
                        </select>
                    </label>
                </div>

                {employeeType === 'PERMANENT' && (
                    <div className='add-new-employee'>
                        <label>
                            <span>EPF No:</span>
                            <input
                                type="text"
                                value={epfNo}
                                onChange={(e) => setEpfNo(e.target.value)}
                                required
                            />
                        </label>
                    </div>
                )}

                <button type="submit" className="add-button">Add</button>
                {error && <p style={{ color: 'red' }}>{error}</p>}
                {success && <p style={{ color: 'green' }}>{success}</p>}
            </form>
        </div>
    );
}

export default AddNewEmployee;
*/